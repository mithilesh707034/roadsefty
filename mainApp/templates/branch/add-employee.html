{%extends 'branch/branch-index.html'%}
{%load static%}
{%block body%}

<script>
    function validateForm() {
        var email = document.getElementById("email").value;

        // Extract usernames from the 'unames' object
        var existingUsernames = [];
        {% for item in uname %}
        existingUsernames.push('{{ item.username }}');
        {% endfor %}

        // Check if the entered username already exists in the 'existingUsernames' array
        if (existingUsernames.includes(email)) {
            alert("Email already Exist.");
            return false; // Prevent form submission
        }
        return true; // Allow form submission if all validations pass
    }


</script>

<!-- ============================================================== -->
<div class="main-contentw-100">
    <div class="page-content">
        <div class="container-fluid">
            
            <!-- end row -->
            
            <div class="row">
                <div class="col-xl-12">
                    <div class="card">
                        <div class="card-body">

                            <h4 class=" text-center">Add Branch</h4>
                            <form method="post" enctype="multipart/form-data" onsubmit="return validateForm();">
                                {%csrf_token%}
                            <div class="row">
                              <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label"> Name</label>
                                    <input type="text" class="form-control" placeholder="Enter Name"name="name" required>
                                </div>
                              </div>

                              <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-control" placeholder="Enter Email"name="email" id="email" required>
                                </div>
                              </div>
                                
                              <div class="col-lg-4">
                                <div class="mb-3">
                                    <label class="form-label">Phone</label>
                                    <input type="number" class="form-control" placeholder="Enter Phone"name="phone" required>
                                </div>
                              </div>

                              <div class="col-lg-6">
                                <div class="mb-3">
                                    <label class="form-label">Address</label>
                                    <input type="text" class="form-control" placeholder="Enter Address"name="address" required>
                                </div>
                              </div>
                              <div class="col-lg-6">
                                <div class="mb-3">
                                    <label class="form-label">New Password</label>
                                    <input type="text" class="form-control" placeholder="Enter New Password"name="password" required>
                                </div>
                              </div>
                            </div>
                               
                                
                            <div class="text-center">
                                <button type="submit" class="btn btn-primary text-center mt-4" style="padding:2px 50px;">Add</submit>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end row -->
        </div> 
    </div>
    <!-- End Page-content -->

    {%endblock%}